{"version":3,"file":"iching.js","sources":["utils/iching.js"],"sourcesContent":["// 周易占卜工具类\nclass IChing {\n  constructor() {\n    // 八卦对应数字\n    this.baguaMap = {\n      1: '乾', 2: '兑', 3: '离', 4: '震',\n      5: '巽', 6: '坎', 7: '艮', 8: '坤'\n    };\n    \n    // 卦象解释\n    this.guaExplanation = {\n      '乾': '天行健，君子以自强不息',\n      '兑': '泽上有水，君子以朋友讲习',\n      '离': '明两作，大人以继明照于四方',\n      '震': '洊雷，君子以恐惧修省',\n      '巽': '随风，君子以申命行事',\n      '坎': '水洊至，君子以常德行，习教事',\n      '艮': '兼山，君子以思不出其位',\n      '坤': '地势坤，君子以厚德载物'\n    };\n  }\n\n  // 三枚铜钱起卦\n  castCoins() {\n    const results = [];\n    for (let i = 0; i < 6; i++) {\n      let sum = 0;\n      for (let j = 0; j < 3; j++) {\n        // 0表示阴，1表示阳\n        sum += Math.random() > 0.5 ? 1 : 0;\n      }\n      // 2或3个阳面为阳爻，0或1个阳面为阴爻\n      results.push(sum >= 2 ? 1 : 0);\n    }\n    return results;\n  }\n\n  // 生成卦象\n  generateGua() {\n    const yao = this.castCoins();\n    const upperGua = this.baguaMap[this.calculateGuaNumber(yao.slice(0, 3))];\n    const lowerGua = this.baguaMap[this.calculateGuaNumber(yao.slice(3))];\n    return {\n      upperGua,\n      lowerGua,\n      yao,\n      explanation: this.guaExplanation[upperGua] + '；' + this.guaExplanation[lowerGua]\n    };\n  }\n\n  // 计算卦数\n  calculateGuaNumber(yao) {\n    let number = 0;\n    for (let i = 0; i < 3; i++) {\n      if (yao[i] === 1) {\n        number += Math.pow(2, i);\n      }\n    }\n    return number + 1;\n  }\n\n  // 获取变爻\n  getChangingYao(yao) {\n    const changingYao = [];\n    for (let i = 0; i < 6; i++) {\n      if (Math.random() < 0.3) { // 30%的概率出现变爻\n        changingYao.push(i);\n      }\n    }\n    return changingYao;\n  }\n}\n\nexport default new IChing(); "],"names":[],"mappings":";AACA,MAAM,OAAO;AAAA,EACX,cAAc;AAEZ,SAAK,WAAW;AAAA,MACd,GAAG;AAAA,MAAK,GAAG;AAAA,MAAK,GAAG;AAAA,MAAK,GAAG;AAAA,MAC3B,GAAG;AAAA,MAAK,GAAG;AAAA,MAAK,GAAG;AAAA,MAAK,GAAG;AAAA,IACjC;AAGI,SAAK,iBAAiB;AAAA,MACpB,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,IACX;AAAA,EACG;AAAA;AAAA,EAGD,YAAY;AACV,UAAM,UAAU,CAAA;AAChB,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,UAAI,MAAM;AACV,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAE1B,eAAO,KAAK,OAAM,IAAK,MAAM,IAAI;AAAA,MAClC;AAED,cAAQ,KAAK,OAAO,IAAI,IAAI,CAAC;AAAA,IAC9B;AACD,WAAO;AAAA,EACR;AAAA;AAAA,EAGD,cAAc;AACZ,UAAM,MAAM,KAAK;AACjB,UAAM,WAAW,KAAK,SAAS,KAAK,mBAAmB,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC;AACvE,UAAM,WAAW,KAAK,SAAS,KAAK,mBAAmB,IAAI,MAAM,CAAC,CAAC,CAAC;AACpE,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA,aAAa,KAAK,eAAe,QAAQ,IAAI,MAAM,KAAK,eAAe,QAAQ;AAAA,IACrF;AAAA,EACG;AAAA;AAAA,EAGD,mBAAmB,KAAK;AACtB,QAAI,SAAS;AACb,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,UAAI,IAAI,CAAC,MAAM,GAAG;AAChB,kBAAU,KAAK,IAAI,GAAG,CAAC;AAAA,MACxB;AAAA,IACF;AACD,WAAO,SAAS;AAAA,EACjB;AAAA;AAAA,EAGD,eAAe,KAAK;AAClB,UAAM,cAAc,CAAA;AACpB,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,UAAI,KAAK,OAAQ,IAAG,KAAK;AACvB,oBAAY,KAAK,CAAC;AAAA,MACnB;AAAA,IACF;AACD,WAAO;AAAA,EACR;AACH;AAEA,MAAe,WAAA,IAAI,OAAQ;;"}